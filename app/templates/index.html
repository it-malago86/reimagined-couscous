<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <title>Meine Kids | Online Shop</title>
</head>
<body>

    <header class="navbar">
        <div class="logo">Meine Kids</div>
        <nav class="nav-links">
    <a href="javascript:void(0)" onclick="showSection('shop')">Catalogo Online</a>
    <a href="javascript:void(0)" onclick="showSection('about')">Chi Sono</a>
</nav>
    </header>

    <main id="shop" class="section">
        <div class="grid">
            {% for p in products %}
            <div class="card" onclick="addToCart('{{ p.name }}', {{ p.price }})">
                <img src="{{ p.image }}" alt="{{ p.name }}" class="product-img">
                <div class="product-info">
                    <h3>{{ p.name }}</h3>
                    <p>{{ p.desc }}</p>
                    <span class="price">€{{ p.price }}</span>
                </div>
                <div class="add-icon">＋</div>
            </div>
            {% endfor %}
        </div>
    </main>
<script>
    window.cart = [];

    // Definiamo la funzione con la T (corretta)
    window.addToCart = function(name, price) {
        console.log("Aggiunta riuscita (T):", name);
        executeAdd(name, price);
    };

    // Definiamo la funzione con la D (per sicurezza contro i typo)
    window.addToCard = function(name, price) {
        console.log("Aggiunta riuscita (D):", name);
        executeAdd(name, price);
    };

    // Logica reale dell'aggiunta
    function executeAdd(name, price) {
        window.cart.push({ name: name, price: price });
        const cartSection = document.getElementById('cart-section');
        if (cartSection) {
            cartSection.classList.remove('cart-hidden');
            cartSection.style.display = 'block';
        }
        updateUI();
    }

    window.updateUI = function() {
        const list = document.getElementById('cart-items');
        if (list) {
            list.innerHTML = window.cart.map(item => 
                `<div style="display:flex; justify-content:space-between; padding:5px 0; border-bottom:1px solid #eee;">
                    <span>${item.name}</span>
                    <span>€${item.price}</span>
                </div>`
            ).join('');
        }
        const total = window.cart.reduce((sum, item) => sum + item.price, 0);
        document.getElementById('total-price').innerText = total;
    };

    window.showSection = function(id) {
        document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
        const target = document.getElementById(id);
        if(target) target.style.display = 'block';
    };

    console.log("Sistema Pronto: addToCart e addToCard sono attivi.");
</script>
   <section id="about" class="section hidden">
    <div class="about-container" style="display: flex; flex-wrap: wrap; gap: 30px; align-items: center;">
        <div style="flex: 1; min-width: 300px;">
            <img src="/static/images/artigiano-al-lavoro.jpg" style="width: 100%; border-radius: 30px; box-shadow: 10px 10px 0px var(--accent-soft);">
        </div>
        <div style="flex: 1; min-width: 300px;">
            <h2 style="color: var(--accent-dark);">Dietro ogni creazione...</h2>
            <p>Siamo una piccola bottega nata dal desiderio di riportare la materia al centro della vita quotidiana.</p>
            <p>Ogni pezzo richiede ore di lavoro e una cura meticolosa per i dettagli.</p>
        </div>
	<div class="cart-section" class="cart-hidden>		    	
	</div>
	</section>
</body>
</html>
